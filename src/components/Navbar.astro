---
import ChevronDown from "@/components/ChevronDown.astro";
import Cross from "@/components/Cross.astro";
import TwoBars from "@/components/TwoBars.astro";
---

<header
  class="hidden bg-black w-full lg:h-32 xl:h-40 lg:px-8 xl:px-10 lg:flex lg:flex-row lg:items-center lg:justify-between sticky"
>
  <a href="#home">
    <img
      class="lg:w-[220px] xl:w-[245px] h-auto"
      src="/img/EventAresLogo.webp"
      alt="Logo EventAres"
    />
  </a>
  <nav
    class="flex text-white lg:gap-4 xl:gap-8 uppercase tracking-[0.1em] xl:justify-center items-center font-medium"
  >
    <a href="#">Sobre mí</a>
    <div class="relative">
      <button
        class="dropdown-button flex justify-center items-center uppercase tracking-[0.1em] gap-1 cursor-pointer"
      >
        <span>Eventos</span>
        <ChevronDown class:list={"w-6 h-6 motion-safe:transition"} />
      </button>
      <div class="absolute hidden bg-black py-3 px-4">
        <a href="#" class="block py-2">Corporativos</a>
        <a href="#" class="block py-2">Sociales</a>
      </div>
    </div>
    <a href="#">FAQ</a>
    <a href="#">Contacto</a>
    <a href="#">Blog</a>
  </nav>
  <button
    class="bg-white lg:w-64 xl:w-72 h-16 uppercase tracking-[0.2em] text-center align-middle font-medium"
  >
    Pide tu presupuesto
  </button>
</header>

<header class="lg:hidden bg-black w-full px-7 sticky">
  <div class="h-[100px] flex justify-between items-center">
    <a href="#home">
      <img
        class="w-[165px] h-auto"
        src="/img/EventAresLogo.webp"
        alt="Logo EventAres"
      />
    </a>
    <button class="hamburger-button">
      <TwoBars class:list={"w-7 h-7 text-white"} />
      <Cross class:list={"hidden w-7 h-7 text-white"} />
    </button>
  </div>
  <nav
    class="mobile-menu hidden flex-col justify-between items-center w-full bg-black text-white h-[calc(100vh-100px)] py-10 text-center uppercase tracking-[0.1em] font-medium overflow-scroll md:overflow-auto"
  >
    <div class="flex flex-1 flex-col items-center w-full">
      <a href="#" class="w-full pb-12 border-b border-white">Sobre mí</a>
      <div class="relative w-full">
        <button
          class="dropdown-mobile w-full flex justify-center items-center uppercase tracking-[0.1em] gap-1 cursor-pointer border-b border-white py-12"
        >
          <span>Eventos</span>
          <ChevronDown class:list={"w-6 h-6 motion-safe:transition"} />
        </button>
        <div class="hidden bg-black py-3 w-full border-b border-white">
          <a href="#" class="block py-5">Corporativos</a>
          <a href="#" class="block py-5">Sociales</a>
        </div>
      </div>
      <a href="#" class="w-full py-12 border-b border-white">FAQ</a>
      <a href="#" class="w-full py-12 border-b border-white">Contacto</a>
      <a href="#" class="w-full py-12">Blog</a>
    </div>
    <button
      class="bg-white w-72 h-16 py-5 uppercase tracking-[0.2em] text-center text-black align-middle font-medium"
    >
      Pide tu presupuesto
    </button>
  </nav>
</header>

<script>
  const $body = document.querySelector("body");
  const $dropDownButton = document.querySelector(".dropdown-button");
  const $dropDownButtonMobile = document.querySelector(".dropdown-mobile");
  const $hamburgerButton = document.querySelector(".hamburger-button");
  const $mobileMenu = document.querySelector(".mobile-menu");

  $dropDownButton?.addEventListener("click", () => {
    const $dropDownMenu = $dropDownButton.nextElementSibling;

    if ($dropDownMenu?.classList.contains("hidden")) {
      $dropDownButton.querySelector("svg")?.classList.add("rotate-180");
      $dropDownMenu?.classList.remove("hidden");
    } else {
      $dropDownButton.querySelector("svg")?.classList.remove("rotate-180");
      $dropDownMenu?.classList.add("hidden");
    }
  });

  $dropDownButtonMobile?.addEventListener("click", () => {
    const $dropDownMenu = $dropDownButtonMobile.nextElementSibling;

    if ($dropDownMenu?.classList.contains("hidden")) {
      $dropDownButtonMobile.querySelector("svg")?.classList.add("rotate-180");
      $dropDownMenu?.classList.remove("hidden");
    } else {
      $dropDownButtonMobile
        .querySelector("svg")
        ?.classList.remove("rotate-180");
      $dropDownMenu?.classList.add("hidden");
    }
  });

  $hamburgerButton?.addEventListener("click", () => {
    if ($hamburgerButton.children.item(1)?.classList.contains("hidden")) {
      $hamburgerButton.children.item(0)?.classList.add("hidden");
      $hamburgerButton.children.item(1)?.classList.remove("hidden");

      $mobileMenu?.classList.remove("hidden");
      $mobileMenu?.classList.add("flex");

      // Evito scroll
      $body?.classList.add("overflow-hidden");
    } else {
      $hamburgerButton.children.item(0)?.classList.remove("hidden");
      $hamburgerButton.children.item(1)?.classList.add("hidden");

      $mobileMenu?.classList.remove("flex");
      $mobileMenu?.classList.add("hidden");

      // Reactivo scroll
      $body?.classList.remove("overflow-hidden");
    }
  });
</script>
